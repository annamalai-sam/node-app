<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>do Task</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
      crossorigin="anonymous"
    />
    <!-- JavaScript Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.6.1.js"
      integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="css/style.css" />
    <script src="./../js/minDAte.js"></script>
    <!-- <style>
      .parent-container-max-width {
        margin: auto;
        max-width: 100%;
      }

      @media (min-width: 576px) {
        .parent-container-max-width {
          max-width: 500px;
        }
      }

      @media (min-width: 768px) {
        .parent-container-max-width {
          max-width: 620px;
        }
      }

      @media (min-width: 992px) {
        .parent-container-max-width {
          max-width: 760px;
        }
      }

      @media (min-width: 1200px) {
        .parent-container-max-width {
          max-width: 760px;
        }
      }

      @media (min-width: 1400px) {
        .parent-container-max-width {
          max-width: 760px;
        }
      }
      .parent-container {
        border-left: 1px solid #dee2e6;
        border-right: 1px solid #dee2e6;
        box-shadow: -60px 0px 50px -90px #696565, 60px 0px 50px -90px #696565;
      }
    </style> -->
  </head>
  <body>
    <section class="container-xl fixed-top">
      <div class="bg-light p-3">
        <div class="mt-3 mb-3">
          <p class="h1 text-center text-primary">do Task</p>
        </div>
        <form action="/new" method="post" class="">
          <div class="row g-3 align-items-center">
            <!-- <div class="col-lg-1 d-md-none"></div> -->
            <div
              class="form-floating ms-xxl-5 ms-xl-4 ms-lg-3 col-xxl-7 col-xl-8 col-lg-8 col-md-8"
            >
              <input
                type="text"
                class="form-control border-0 border-bottom"
                id="todoText"
                value=""
                placeholder="New Task..."
                name="task"
                required
              />
              <label for="todoText">New Task...</label>
            </div>
            <div
              class="ms-xxl-5 ms-xl-4 ms-lg-3 col-xxl-2 col-xl-2 col-lg-2 col-md-2 col-sm-4 col-6"
            >
              <input
                type="date"
                name="due_date"
                class="btn btn-dark m-0 text-bg-light"
                style=""
                id="date"
                required
                min=""
              />
            </div>
            <div
              class="ms-xxl-2 ms-xl-4 ms-lg-4 ms-md-5 ms-5 col-xxl-1 col-xl-1 col-lg-1 col-md-1 col-sm-1 col-4"
            >
              <button
                type="submit"
                class="pe-3 ps-3 pb-2 pt-2 btn btn-outline-secondary"
              >
                <i class="fa fa-plus-circle fa-1x" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </form>
      </div>
    </section>

    <section class="container-xl">
      <div class="bg-light p-3">
        <div class="mt-3 mb-3">
          <p class="h1 text-center text-primary">do Task</p>
        </div>
        <form action="" method="" class="">
          <div class="row g-3 align-items-center">
            <!-- <div class="col-lg-1 d-md-none"></div> -->
            <div
              class="form-floating ms-xxl-5 ms-xl-4 ms-lg-3 col-xxl-7 col-xl-8 col-lg-8 col-md-8"
            >
              <input
                type="text"
                class="form-control border-0 border-bottom"
                id="todoText"
                value=""
                placeholder="New Task..."
                name="task"
                required
              />
              <label for="todoText">New Task...</label>
            </div>
            <div
              class="ms-xxl-5 ms-xl-4 ms-lg-3 col-xxl-2 col-xl-2 col-lg-2 col-md-2 col-sm-4 col-6"
            >
              <input
                type="date"
                name="due_date"
                class="btn btn-dark m-0 text-bg-light"
                style=""
                id="date"
                required
                min=""
              />
            </div>
            <div
              class="ms-xxl-2 ms-xl-4 ms-lg-4 ms-md-5 ms-5 col-xxl-1 col-xl-1 col-lg-1 col-md-1 col-sm-1 col-4"
            >
              <button
                type=""
                class="pe-3 ps-3 pb-2 pt-2 btn btn-outline-secondary"
              >
                <i class="fa fa-plus-circle fa-1x" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </form>
      </div>
    </section>

    <section class="parent-container-max-width parent-container mt-3">
      <div
        class="ps-lg-2 ps-md-3 ps-sm-2 ps-2 pe-2 ps-xl-4 ps-xxl-4 pe-lg-2 pe-md-3 pe-sm-2 pe-xl-4 pe-xxl-4"
      >
        <% if (data.length == 0) { %>
        <div class="row g-3 m-auto">
          <div class="col">
            <p>No task Added</p>
          </div>
        </div>
        <% } else { %> <% for (i = 0; i < data.length; i++) { %>
        <div class="mt-2">
          <div class="row">


            <div class="col-10 ms-auto me-auto">
              <% if (data[i].status == "incomplete" ) { %>
              <a class="btn btn-outline-primary" href="/mark/<%=data[i].id%>">
                <i class="fa fa-check-square-o" aria-hidden="true"></i>
              </a>
              <% } else { %>
              <p class="text-success"><%= data[i].status %>d</p>
              <% } %>
            </div>

            <div class="col-2 ms-auto">
              <a class="btn btn-outline-danger" href="/del/<%=data[i].id%>">
                <i class="fa fa-trash" aria-hidden="true"></i>
              </a>
            </div>
            
          </div>


          <div class="row mt-2">
            <div class="col-10 ms-auto me-auto">
              <h4><%= data[i].task %></h4>
            </div>
            <div class="col-2 ms-auto">
              <a class="btn btn-outline-primary" href="/updat/<%=data[i].id%>">
                <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
              </a>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <% let dueObject = new Date(data[i].due_date) %> <% let dueYear =
              dueObject.getFullYear() %> <% let dueMonth = dueObject.getMonth()
              %> <% let dueDate = dueObject.getDate() %> <% let dueDisplayString
              =`${dueDate} - ${dueMonth+1} - ${dueYear}` %>
              <h4><%= dueDisplayString %></h4>
            </div>
            <div class="col-6">
              <% let createdObject = new Date(data[i].created_date) %> <% let
              createdYear = createdObject.getFullYear() %> <% let createdMonth =
              createdObject.getMonth() %> <% let createdDate =
              createdObject.getDate() %> <% let createdDisplayString
              =`${createdDate} - ${createdMonth+1} - ${createdYear}` %>
              <h4><%= createdDisplayString %></h4>
            </div>
          </div>
          <hr />
        </div>

        <% } %> <% } %>
      </div>
    </section>

    <!-- <section
      class="parent-container-max-width parent-container"
      style="margin-top: 200px"
    >
      <div class="row d-flex justify-content-center m-5 align-items-center">
        <% if (data.length == 0) { %>
        <div class="row g-3 m-auto">
          <div class="col">
            <p>No task Added</p>
          </div>
        </div>
        <% } else { %>
        <div class="row g-3 m-auto">
          <div class="col-1"></div>
          <div class="col-5">
            <h4>Task Title</h4>
          </div>
          <div class="col-2">
            <h4>Created Date</h4>
          </div>
          <div class="col-2">
            <h4>Due Date</h4>
          </div>
          <div class="col-2">
            <h4>Status</h4>
          </div>
        </div>
      </div>
      <% for (i = 0; i < data.length; i++) { %>
      <div class="row g-3 m-auto">
        <div class="col-1">
          <a class="btn btn-outline-primary" href="/updat/<%=data[i].id%>">
            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
          </a>
        </div>
        <div class="col-4">
          <p><%= data[i].task %></p>
        </div>
        <div class="col-2">
          <% let createdObject = new Date(data[i].created_date) %> <% let
          createdYear = createdObject.getFullYear() %> <% let createdMonth =
          createdObject.getMonth() %> <% let createdDate =
          createdObject.getDate() %> <% let createdDisplayString
          =`${createdDate} - ${createdMonth+1} - ${createdYear}` %>
          <p><%= createdDisplayString %></p>
        </div>
        <div class="col-2">
          <% let dueObject = new Date(data[i].due_date) %> <% let dueYear =
          dueObject.getFullYear() %> <% let dueMonth = dueObject.getMonth() %>
          <% let dueDate = dueObject.getDate() %> <% let dueDisplayString
          =`${dueDate} - ${dueMonth+1} - ${dueYear}` %>
          <p><%= dueDisplayString %></p>
        </div>
        <div class="col-2">
          <% if (data[i].status == "incomplete" ) { %>
          <a class="btn btn-outline-primary" href="/mark/<%=data[i].id%>">
            <i class="fa fa-check-square-o" aria-hidden="true"></i>
          </a>
          <% } else { %>
          <p class="text-success"><%= data[i].status %>d</p>
          <% } %>
        </div>
        <div class="col-1">
          <a class="btn btn-outline-danger" href="/del/<%=data[i].id%>">
            <i class="fa fa-trash" aria-hidden="true"></i>
          </a>
        </div>
      </div>
      <% } %> <% } %> %>
    </section> -->

    <script>
      var today = new Date();
      var dd = today.getDate();
      var mm = today.getMonth() + 1;
      var yyyy = today.getFullYear();
      if (dd < 10) {
        dd = "0" + dd;
      }
      if (mm < 10) {
        mm = "0" + mm;
      }

      today = yyyy + "-" + mm + "-" + dd;
      document.getElementById("date").setAttribute("min", today);
      document.getElementById("date").setAttribute("value", today);
    </script>
  </body>
</html>
